<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>RankSmarter</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Stop pretending your ranking is real. A mathematical reality check for shortlists.">
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>

<header class="topbar">
  <div class="brand">
    <span class="logo">RankSmarter</span>
    <span class="privacy">üîí Local only, your data never leaves the browser</span>
  </div>
  <nav>
    <a href="#" id="openMath">Explain the maths</a>
    <a href="#" id="openGuide">Quick guide</a>
    <a href="assets/example.csv" download>Example CSV</a>
    <a href="#" id="loadDemo">Try demo</a>
  </nav>
</header>

<section class="hero">
  <div class="hero-left">
    <h1>Stop pretending your ranking is real.</h1>
    <p>
      Rankings look precise, but small scoring noise can change who gets selected.
      RankSmarter is a reality check for shortlists: it tells you whether your cutoff is defensible,
      or whether you should treat the boundary as a tie band.
    </p>
    <p class="usecases">
      <strong>Use it for:</strong> hiring scorecards, vendor selection, prioritisation,
      investment shortlists, grant awards.
    </p>
    <div class="actions">
      <button id="jumpUpload" class="primary" type="button">Upload scores</button>
      <button id="openMathHero" type="button">Explain the maths</button>
    </div>
  </div>

  <div class="hero-right">
    <div class="step"><span>1</span> Upload a CSV of names and scores</div>
    <div class="step"><span>2</span> Choose how many you are selecting (your cutoff)</div>
    <div class="step"><span>3</span> Get a plain-English verdict plus evidence</div>
  </div>
</section>

<section class="card" id="uploadCard">
  <h2>Upload scores (CSV)</h2>
  <input type="file" id="fileInput" accept=".csv,text/csv">
  <p class="hint">One row per item. One numeric score per row. Example headers: <code>item</code>, <code>score</code>.</p>
  <p class="hint" id="uploadStatus"></p>
</section>

<section class="card hidden" id="controls">
  <div class="grid2">
    <label>
      How many are you selecting? (cutoff)
      <input type="number" id="kInput" min="1" step="1">
      <span class="small" id="kHint"></span>
    </label>

    <label>
      Assumed score error (wiggle room)
      <input type="range" id="epsInput" min="0" max="5" step="0.01" value="0.50">
      <span class="small">Current: ¬±<span id="epsValue">0.50</span></span>
    </label>
  </div>

  <div class="grid2">
    <label class="row">
      <input type="checkbox" id="mcEnable">
      <span>Run stress test (Monte Carlo)</span>
    </label>

    <div class="row">
      <label class="inline">
        Samples
        <input type="number" id="mcSamples" min="200" max="20000" step="100" value="2000" disabled>
      </label>
      <label class="inline">
        Seed
        <input type="number" id="mcSeed" min="0" max="999999999" step="1" value="12345" disabled>
      </label>
    </div>
  </div>

  <div class="row">
    <button id="runAnalysis" class="primary" type="button">Run analysis</button>
    <button id="runMc" type="button" disabled>Run stress test</button>
  </div>
</section>

<section class="card hidden" id="verdict">
  <h2>Verdict</h2>
  <div class="pill" id="verdictPill"></div>
  <p id="verdictText"></p>
  <p id="actionText"></p>
  <p class="hint" id="whyText"></p>

  <div class="exports">
    <button id="exportJson" type="button">Download JSON</button>
    <button id="exportMarkdown" type="button">Download report</button>
  </div>
</section>

<section class="card hidden" id="details">
  <h2>Evidence</h2>

  <div class="grid2">
    <div>
      <h3>Boundary check</h3>
      <div class="miniTable" id="boundaryTable"></div>
    </div>
    <div>
      <h3>Tie band around the cutoff</h3>
      <div id="tieBandBox" class="callout"></div>
    </div>
  </div>

  <h3>Top items (preview)</h3>
  <div class="miniTable" id="previewTable"></div>

  <div class="hidden" id="mcBlock">
    <h3>Stress test results</h3>
    <p id="mcSummary" class="hint"></p>
    <div class="miniTable" id="mcTable"></div>
  </div>
</section>

<!-- Maths modal -->
<div class="modal hidden" id="mathModal" role="dialog" aria-modal="true" aria-labelledby="mathTitle" aria-hidden="true">
  <div class="modal-content" role="document">
    <div class="modal-header">
      <h3 id="mathTitle">The maths (optional)</h3>
      <button class="closeModal" type="button" aria-label="Close">Close</button>
    </div>

    <div class="modal-body">
      <p>
        Rankings feel decisive because they print a clean order. In real decisions, scoring has wobble:
        raters disagree, criteria get interpreted differently, and the data is incomplete.
      </p>

      <p>
        RankSmarter turns that into a single auditable question:
        <strong>how accurate would scoring need to be for your cutoff to be guaranteed?</strong>
        If you cannot defend that level of accuracy, the honest move is to treat the boundary as a tie band.
      </p>

      <h4>What ‚Äúwiggle room‚Äù means here</h4>
      <p>
        Wiggle room (Œµ) is the largest scoring error you consider plausible for this process.
        It depends on context. Structured interviews tend to be tighter than unstructured interviews.
        Cost estimates differ again.
      </p>

      <h4>The forced threshold at your cutoff</h4>
      <p>
        Sort scores high to low. If you select the top <strong>N</strong>, the cutoff sits between rank <strong>N</strong> and <strong>N+1</strong>.
        Let the two scores be:
      </p>

      <pre>inside  = sN
outside = sN+1
gap     = sN ‚àí sN+1</pre>

      <p>
        Worst case, the inside score is too high by Œµ and the outside score is too low by Œµ.
        The boundary can flip when:
      </p>

      <pre>sN ‚àí Œµ ‚â§ sN+1 + Œµ</pre>

      <p>Rearranging gives the forced threshold:</p>

      <pre>Œµ ‚â• (sN ‚àí sN+1) / 2
Œµ ‚â• gap / 2</pre>

      <p>
        That threshold is implied by your data. It is repeatable and auditable.
        RankSmarter uses it to say whether a strict cutoff is defensible at your chosen wiggle room.
      </p>
    </div>
  </div>
</div>

<!-- Quick guide modal -->
<div class="modal hidden" id="guideModal" role="dialog" aria-modal="true" aria-labelledby="guideTitle" aria-hidden="true">
  <div class="modal-content" role="document">
    <div class="modal-header">
      <h3 id="guideTitle">Quick guide</h3>
      <button class="closeGuide" type="button" aria-label="Close">Close</button>
    </div>
    <div class="modal-body">
      <ol>
        <li>Upload your CSV (two columns: item, score).</li>
        <li>Choose how many you are selecting. That is your cutoff.</li>
        <li>Set wiggle room to the largest scoring error you consider plausible.</li>
        <li>Run analysis. If the cutoff is not defensible, treat the boundary as a tie band.</li>
      </ol>
      <p class="hint">
        Tip: if you are unsure about wiggle room, start higher. If the cutoff still holds, you have a robust boundary.
      </p>
    </div>
  </div>
</div>

<script src="js/analysis.js"></script>
<script src="js/montecarlo.js"></script>
<script src="js/export.js"></script>
<script src="js/app.js"></script>

</body>
</html>
